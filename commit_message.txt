refactor: Separate VAD and visualization logic